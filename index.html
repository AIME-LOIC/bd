<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, Queen!</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the animation and look */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in {
            animation: fadeIn 1s ease-out;
        }

        /* Styling for the confetti particles */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: transparent;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center p-4 font-sans antialiased">

    <!-- Main Birthday Card Container -->
    <div id="birthday-card" class="w-full max-w-4xl bg-gray-800 p-8 md:p-12 lg:p-16 rounded-3xl shadow-2xl animate-in text-center relative overflow-hidden">
        
        <!-- Header Ribbon/Gradient -->
        <div class="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 rounded-t-3xl"></div>

        <p class="text-xl text-pink-400 font-semibold mb-2">A Message From Your Friend Loic</p>
        
        <!-- Main Heading - Customizable -->
        <h1 class="text-6xl md:text-8xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-yellow-300 to-pink-500" style="letter-spacing: -2px;">
            Happy Birthday, <span id="friend-name">[Friend's Name]!</span>
        </h1>

        <!-- Personalized Message Area -->
        <div class="mt-8 text-left max-w-xl mx-auto">
            <p id="message-text" class="text-gray-300 text-lg md:text-xl leading-relaxed mb-6">
                <!-- Message will be typed out here -->
            </p>

            <div id="signature-area" class="text-right mt-6 opacity-0 transition-opacity duration-1000">
                <p class="text-xl text-yellow-400 font-serif italic">— Your Friend Loic</p>
            </div>
        </div>
        
        <!-- Interactive Button -->
        <button id="gift-button" class="mt-10 px-8 py-3 bg-indigo-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-indigo-500 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-500/50" onclick="triggerGiftMessage()">
            Tap for a Special Gift!
        </button>

        <!-- Gift Message Modal (initially hidden) -->
        <div id="gift-message-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 transition-opacity duration-300 opacity-0" onclick="hideModal()">
            <div class="bg-white p-8 rounded-xl shadow-2xl max-w-lg mx-auto transform scale-95 transition-transform duration-300" onclick="event.stopPropagation()">
                <h2 class="text-3xl font-bold text-purple-700 mb-4">Your Gift is...</h2>
                <p class="text-gray-700 text-lg">
                    A promise: I'm taking you out for a massive, fun-filled celebration In Vac—my treat! You deserve the best day ever.
                </p>
                <button class="mt-6 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-500" onclick="hideModal()">
                    Awesome! (Close)
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Configuration
        const FRIEND_NAME = "Queen"; // <--- CUSTOMIZE THIS!
        
        const FULL_MESSAGE = `
            To the most incredible ${FRIEND_NAME},

            Today, the world celebrates the day you came into it, and I'm so grateful to be part of your journey. You bring light, laughter, and an unparalleled level of kindness to everyone you meet.

            I hope your special day is filled with everything that makes you happiest, and that the coming year is your best one yet. Cheers to you, and everything you accomplish!
        `;
        
        const MESSAGE_ELEMENT = document.getElementById('message-text');
        const CARD_ELEMENT = document.getElementById('birthday-card');
        const SIGNATURE_ELEMENT = document.getElementById('signature-area');
        const GIFT_MODAL = document.getElementById('gift-message-modal');

        /**
         * Utility function for waiting
         * @param {number} ms - milliseconds to wait
         */
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        /**
         * Types out the message character by character.
         */
        async function typeMessage() {
            // Update the name placeholder
            document.getElementById('friend-name').textContent = FRIEND_NAME;
            
            MESSAGE_ELEMENT.innerHTML = '';
            
            const words = FULL_MESSAGE.trim().split(/\s+/);
            let typedText = '';

            for (let word of words) {
                // Determine if we need to add a paragraph break (for the newlines in the template string)
                if (word === "") continue;

                typedText += word + ' ';
                
                // Replace \n with <br> tags for correct formatting
                const formattedText = typedText.replace(/\n\s*/g, '<br><br>');
                MESSAGE_ELEMENT.innerHTML = formattedText;

                // Simple mechanism to make it appear like typing
                await sleep(50);
            }
            
            // Show signature after typing is complete
            SIGNATURE_ELEMENT.classList.add('opacity-100');
            
            // Start the confetti automatically
            triggerConfetti();
        }

        /**
         * Creates a single confetti particle.
         * @param {number} x - initial X position
         * @param {number} y - initial Y position
         */
        function createConfetti(x, y) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');

            // Random color
            const colors = ['#f472b6', '#a78bfa', '#38bdf8', '#fbbf24', '#f87171'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = color;
            
            // Random shape (make it square or round for variety)
            if (Math.random() > 0.5) {
                confetti.style.borderRadius = '2px';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            }

            // Initial position (centered on the card)
            confetti.style.left = `${x}px`;
            confetti.style.top = `${y}px`;
            
            // Append to body (to avoid overflow issues with the card)
            document.body.appendChild(confetti);
            
            // Slight delay before making it visible
            setTimeout(() => {
                confetti.style.opacity = 1;
            }, 10);


            // Animate it
            const angle = Math.random() * Math.PI; // Random angle in radians
            const velocity = 25 + Math.random() * 20; // Random velocity
            const gravity = 0.5;

            let vx = velocity * Math.cos(angle);
            let vy = velocity * Math.sin(angle) * -1; // -1 for upward movement
            let currentX = x;
            let currentY = y;
            let rotationSpeed = Math.random() * 10 - 5; // Rotate between -5 and 5 degrees/frame
            let currentRotation = 0;

            const animationLoop = () => {
                vy += gravity; // Apply gravity
                currentX += vx;
                currentY += vy;
                currentRotation += rotationSpeed;

                confetti.style.left = `${currentX}px`;
                confetti.style.top = `${currentY}px`;
                confetti.style.transform = `rotate(${currentRotation}deg)`;

                if (currentY < window.innerHeight && currentX > 0 && currentX < window.innerWidth) {
                    requestAnimationFrame(animationLoop);
                } else {
                    confetti.remove();
                }
            };
            
            requestAnimationFrame(animationLoop);
        }

        /**
         * Triggers a burst of confetti.
         */
        function triggerConfetti() {
            // Get the center of the card
            const rect = CARD_ELEMENT.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // Create a burst of particles
            for (let i = 0; i < 100; i++) {
                // Start confetti slightly above the center
                createConfetti(centerX + (Math.random() - 0.5) * 50, centerY + (Math.random() - 0.5) * 50 - 50);
            }
        }
        
        /**
         * Reveals the special gift message modal.
         */
        function triggerGiftMessage() {
            GIFT_MODAL.classList.remove('hidden');
            // Force reflow to allow transition
            void GIFT_MODAL.offsetWidth; 
            GIFT_MODAL.classList.add('opacity-100');
            // Scale in the nested modal content
            GIFT_MODAL.querySelector('div').classList.remove('scale-95');
            GIFT_MODAL.querySelector('div').classList.add('scale-100');
            
            // Run a quick second burst of confetti
            triggerConfetti();
        }
        
        /**
         * Hides the gift message modal.
         */
        function hideModal() {
            GIFT_MODAL.classList.remove('opacity-100');
            GIFT_MODAL.querySelector('div').classList.remove('scale-100');
            GIFT_MODAL.querySelector('div').classList.add('scale-95');

            setTimeout(() => {
                GIFT_MODAL.classList.add('hidden');
            }, 300);
        }

        // Start the typing sequence when the window loads
        window.onload = typeMessage;

    </script>
</body>
</html>
